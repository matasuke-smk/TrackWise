## 💰 収支予定管理アプリ仕様書

### 1. アプリ概要

* **目的:** ユーザーが月ごとの収入と支出の**予定額**を設定し、それに基づき月の収支見込みを把握する。また、実際の収支を記録し、予定との差異を比較できるようにする。
* **ターゲット:** 予算管理を行いたいすべての人。
* **プラットフォーム:** PWAまたはネイティブアプリ (iOS/Android)。

---

### 2. 主要機能要件

#### 2.1. 収支カテゴリ管理

| 機能名 | 説明 |
| :--- | :--- |
| **カテゴリカスタマイズ** | 収入・支出それぞれのカテゴリをユーザーが**自由に追加・編集・削除**できる。 |
| **カテゴリの表示設定** | 各カテゴリに対し、メイン画面の「**メイン表示**」または「**その他**」グループへの所属を設定できる。 |

#### 2.2. 月間予定入力・計算

| 機能名 | 説明 |
| :--- | :--- |
| **予定額一括入力** | 選択した月（デフォルトは当月）の**全カテゴリ**の**予定額**を一括で入力・更新できる。 |
| **収支見込み計算** | 全ての収入予定額の合計から、全ての支出予定額の合計を差し引き、その月の**「残る金額」**（黒字）または**「足りない金額」**（赤字）を自動計算し、メイン画面に表示する。 |

#### 2.3. 実際の収支記録

| 機能名 | 説明 |
| :--- | :--- |
| **実績額個別変更** | 各カテゴリについて、予定額とは別に**実績額**を個別に入力・変更・記録できる。 |
| **実績収支計算** | 記録された実績額に基づき、その月の**実際の収支**（実績の残額/不足額）を計算し表示する。 |
| **予定 vs 実績比較** | 各カテゴリおよび全体の収支見込みと実績の差異を視覚的に確認できる機能（例：グラフ表示、差異額表示）。 |

---

### 3. ユーザーインターフェース (UI) 要件

#### 3.1. メイン画面

* **表示項目:**
    * 選択中の年月。
    * **予定収支合計:** 収入予定合計、支出予定合計、**残る/足りない金額 (予定)**。
    * **実績収支合計:** 収入実績合計、支出実績合計、**残る/足りない金額 (実績)**。
    * **メイン表示カテゴリリスト:** ユーザーが「メイン表示」に設定したカテゴリのみを一覧表示する。表示要素は「カテゴリ名」「予定額」「実績額」。
* **操作:**
    * 予定額一括入力画面への遷移ボタン。
    * 「その他」カテゴリグループを表示するボタン（モーダル表示）。

#### 3.2. カテゴリ「その他」モーダル画面

* **表示項目:** ユーザーが「その他」に設定したカテゴリ全ての一覧。「カテゴリ名」「予定額」「実績額」。
* **操作:** このモーダル内でも、各カテゴリの**実績額**を個別に入力・変更できるようにする。

#### 3.3. 予定額一括入力画面

* **表示項目:** 収入・支出の全カテゴリの一覧。各カテゴリの入力欄に予定額を入力できる。
* **操作:** 入力完了ボタン（全ての予定額を一括で保存）。

#### 3.4. 設定画面

* **機能:**
    * カテゴリの新規作成、編集、削除。
    * カテゴリごとの「メイン表示」/「その他」の切り替え設定。
    * （将来的な拡張として）データのバックアップ・復元。

---

### 4. データ構造 (イメージ)

アプリは以下の情報を月ごとに管理します。

| データ項目 | 属性 | 説明 |
| :--- | :--- | :--- |
| **年月** | 必須 | データが属する月 |
| **カテゴリID** | 必須 | カテゴリを一意に識別するID |
| **カテゴリ名** | 必須 | 例: 給与、食費、家賃 |
| **収支区分** | 必須 | 収入 or 支出 |
| **表示区分** | 必須 | メイン表示 or その他 |
| **予定額** | 必須 | ユーザーが設定した予算額 |
| **実績額** | 任意 | 実際に発生した金額 (デフォルトは0) |